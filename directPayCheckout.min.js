function directPayCheckout(e,t){var n=e.merchantId,c=e.checkoutBtn,o=e.qrCode,d=e.amount,a=(e.invoiceId,document.getElementById(c));a.innerHTML+='<button class="btn btn-primary btn-block" id="_directPayCheckoutButton">DirectPay</button>';var i=document.createElement("script");i.src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js",document.head.appendChild(i),document.getElementById("_directPayCheckoutButton").addEventListener("click",function(){function e(){console.log("onConnect");client.subscribe("Supun")}function c(e){0!==e.errorCode&&console.log("onConnectionLost:"+e.errorMessage)}function a(e){var n=JSON.parse(e.payloadString);1==n.success?($("#transactionId").text("Receipt No: "+n.id),$("#amount").text("Payment : "+n.amount),$("#merchantName").text("Merchant Name: "+n.name),$("#qr").remove(),t(n,200),document.getElementById("_directPayCheckoutButton").disabled=!1):t(n,500)}document.getElementById("_directPayCheckoutButton").disabled=!0;var i=d,r=n,s="123456",u="http://13.58.144.197/default/web/purchase/getqr?amount="+i+"&id="+s+"&merchantId="+r;document.getElementById(o).innerHTML+='<img src="" id="qr" ><div id="success"></div><div id="transactionId"></div><div id="amount"></div><div id="merchantName"></div>';var m=new XMLHttpRequest;m.onreadystatechange=function(){4==m.readyState&&200==m.status&&(document.getElementById("qr").src=m.responseText)},m.open("GET",u,!0),m.send(null),client=new Paho.MQTT.Client("13.58.144.197",9001,"clientId"+(new Date).getTime()),client.onConnectionLost=c,client.onMessageArrived=a,client.connect({onSuccess:e})})}